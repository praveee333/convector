{% extends "base.html" %}

{% block content %}
<div class="container">
    <div class="section">
        <h2 class="section-title">Bank Statement Analyzer</h2>
        <p class="section-subtitle">Upload your bank statement and get a categorized Excel report with detailed transaction analysis</p>
        
        <!-- Payment Success Message -->
        {% if payment_success %}
        <div class="alert alert-success" id="paymentSuccessAlert">
            <i class="fas fa-check-circle"></i> 
            <span>Payment successful! Your subscription is now active. You can start analyzing bank statements.</span>
        </div>
        {% endif %}
        
        <!-- User Info Modal -->
        <div id="userInfoModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h3>Enter Your Information</h3>
                <form id="userInfoForm">
                    <div class="form-group">
                        <label for="userName">Your Name:</label>
                        <input type="text" id="userName" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="bankName">Bank Name:</label>
                        <input type="text" id="bankName" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="customerNumber">Customer Number:</label>
                        <div class="customer-number-container">
                            <input type="text" id="customerNumber" class="form-input" required>
                            <button type="button" id="generateCustomerNumber" class="btn-generate">Auto Generate</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Analysis Date:</label>
                        <input type="text" id="analysisDate" class="form-input" readonly>
                    </div>
                    <button type="submit" class="btn">Save and Continue</button>
                </form>
            </div>
        </div>
        
        <div class="bank-statement-form">
            <div class="alert alert-success" id="successAlert">
                <i class="fas fa-check-circle"></i> <span id="successMessage"></span>
            </div>
            
            <div class="alert alert-error" id="errorAlert">
                <i class="fas fa-exclamation-circle"></i> <span id="errorMessage"></span>
            </div>
            
            <div class="alert alert-info" id="infoAlert">
                <i class="fas fa-info-circle"></i> <span id="infoMessage"></span>
            </div>
            
            <form id="uploadForm" action="/upload" method="POST" enctype="multipart/form-data">
                <input type="hidden" id="hiddenName" name="name">
                <input type="hidden" id="hiddenBankName" name="bank_name">
                <input type="hidden" id="hiddenCustomerNumber" name="customer_number">
                
                <div class="form-group">
                    <label for="file" class="form-label">Select Bank Statement File</label>
                    <div class="file-upload-wrapper" id="fileUploadWrapper">
                        <div class="file-upload-icon">
                            <i class="fas fa-file-invoice-dollar"></i>
                        </div>
                        <div class="file-upload-text">
                            <h3>Drag & Drop your bank statement here</h3>
                            <p>or</p>
                        </div>
                        <button type="button" class="btn btn-secondary" id="browseButton">
                            <i class="fas fa-folder-open btn-icon"></i> Browse Files
                        </button>
                        <input type="file" id="file" name="file" class="form-input" accept=".pdf,.png,.jpg,.jpeg,.gif,.doc,.docx,.xls,.xlsx" style="display: none;" required>
                        <div class="file-name" id="fileName"></div>
                    </div>
                    <div class="file-info">Supported formats: PDF, PNG, JPG, GIF, DOC, DOCX, XLS, XLSX</div>
                    <div class="progress-bar" id="progressBar">
                        <div class="progress-bar-fill" id="progressBarFill"></div>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn" id="uploadBtn">
                        <i class="fas fa-cogs btn-icon"></i> Analyze Statement
                    </button>
                    <a href="{{ url_for('bank_statement_history') }}" class="btn btn-secondary">
                        <i class="fas fa-history btn-icon"></i> View History
                    </a>
                </div>
            </form>
            
            <div class="features-section">
                <h3 class="feature-title">How It Works</h3>
                <div class="features-grid">
                    <div class="feature-card fade-in">
                        <div class="feature-icon">
                            <i class="fas fa-cloud-upload-alt"></i>
                        </div>
                        <h4>Upload</h4>
                        <p>Upload your bank statement</p>
                    </div>
                    
                    <div class="feature-card fade-in">
                        <div class="feature-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <h4>Analyze</h4>
                        <p>AI processes transactions</p>
                    </div>
                    
                    <div class="feature-card fade-in">
                        <div class="feature-icon">
                            <i class="fas fa-file-excel"></i>
                        </div>
                        <h4>Export</h4>
                        <p>Get Excel report</p>
                    </div>
                </div>
            </div>
            
          
            
            <div class="security-info">
                <div class="security-card">
                    <div class="security-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="security-text">
                        <h4>Bank-Grade Security</h4>
                        <p>Your financial data is processed securely and never stored on our servers</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.bank-statement-form {
    max-width: 800px;
    margin: 0 auto;
    background: var(--white);
    border-radius: var(--border-radius-lg);
    padding: 40px;
    box-shadow: var(--shadow-md);
    border: 1px solid var(--gray-light);
}

.form-group {
    margin-bottom: 30px;
}

.form-group:last-child {
    text-align: center;
    margin-top: 40px;
}

.form-label {
    display: block;
    margin-bottom: 12px;
    font-weight: 600;
    color: var(--dark);
    font-size: 1.1rem;
}

.form-input {
    width: 100%;
    padding: 16px 20px;
    border: 2px solid var(--gray-light);
    border-radius: var(--border-radius);
    font-family: inherit;
    font-size: 1rem;
    transition: all 0.3s ease;
    background: var(--white);
}

.form-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
}

.file-upload-wrapper {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    border: 2px dashed var(--gray-light);
    border-radius: var(--border-radius);
    padding: 40px 20px;
    text-align: center;
    transition: all 0.3s ease;
    background-color: var(--lighter);
    margin-bottom: 20px;
    cursor: pointer;
}

.file-upload-wrapper:hover {
    border-color: var(--primary);
    background-color: rgba(92, 6, 120, 0.05);
}

.file-upload-wrapper.dragover {
    border-color: var(--primary);
    background-color: rgba(92, 6, 120, 0.1);
    transform: scale(1.02);
}

.file-upload-icon {
    font-size: 3.5rem;
    color: var(--primary);
    margin-bottom: 20px;
}

.file-upload-text {
    margin-bottom: 20px;
}

.file-upload-text h3 {
    color: var(--dark);
    margin-bottom: 10px;
    font-size: 1.4rem;
}

.file-upload-text p {
    color: var(--gray);
    font-size: 1rem;
}

.file-info {
    margin-top: 10px;
    font-size: 0.9rem;
    color: var(--gray);
    text-align: center;
}

.file-name {
    margin-top: 15px;
    font-size: 0.9rem;
    color: var(--primary);
    font-weight: 500;
    display: none;
}

.progress-bar {
    width: 100%;
    height: 10px;
    background-color: var(--gray-light);
    border-radius: 5px;
    overflow: hidden;
    margin-top: 20px;
    display: none;
}

.progress-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--primary), var(--primary-dark));
    width: 0%;
    transition: width 0.4s ease;
}

.alert {
    padding: 15px 20px;
    border-radius: var(--border-radius);
    margin-bottom: 25px;
    display: none;
    align-items: center;
    gap: 12px;
    font-size: 0.95rem;
}

.alert-success {
    background-color: rgba(16, 185, 129, 0.15);
    border: 1px solid rgba(16, 185, 129, 0.3);
    color: #059669;
}

.alert-error {
    background-color: rgba(239, 68, 68, 0.15);
    border: 1px solid rgba(239, 68, 68, 0.3);
    color: #dc2626;
}

.alert-info {
    background-color: rgba(59, 130, 246, 0.15);
    border: 1px solid rgba(59, 130, 246, 0.3);
    color: #1d4ed8;
}

.features-section {
    margin-top: 50px;
    padding-top: 30px;
    border-top: 1px solid var(--gray-light);
}

.feature-title {
    text-align: center;
    font-size: 1.8rem;
    margin-bottom: 40px;
    color: var(--dark);
    font-weight: 700;
    position: relative;
}

.feature-title::after {
    content: '';
    position: absolute;
    bottom: -15px;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 4px;
    background: var(--gradient-primary);
    border-radius: 2px;
}

.features-grid {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin: 0 auto;
}

.feature-card {
    background-color: var(--white);
    border-radius: var(--border-radius);
    padding: 20px 15px;
    text-align: center;
    transition: all 0.3s ease;
    border: 1px solid var(--gray-light);
    box-shadow: var(--shadow-sm);
    flex: 1;
    max-width: 250px;
}

.feature-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-lg);
    border-color: var(--primary-light);
}

.feature-icon {
    font-size: 2rem;
    margin-bottom: 15px;
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
}

.feature-card h4 {
    font-size: 1.1rem;
    margin-bottom: 10px;
    color: var(--dark);
    font-weight: 700;
}

.feature-card p {
    color: var(--gray);
    font-size: 0.9rem;
    line-height: 1.5;
}

.info-section {
    margin-top: 60px;
    padding-top: 30px;
    border-top: 1px solid var(--gray-light);
}

.categories-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
    gap: 20px;
}

.category-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px 10px;
    background: var(--white);
    border-radius: var(--border-radius);
    text-align: center;
    transition: all 0.3s ease;
    border: 1px solid var(--gray-light);
    box-shadow: var(--shadow-sm);
}

.category-item:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-md);
}

.category-icon {
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    font-size: 1.4rem;
    margin-bottom: 15px;
    color: white;
}

.category-icon.deposits {
    background: linear-gradient(135deg, #10b981, #059669);
}

.category-icon.withdrawals {
    background: linear-gradient(135deg, #ef4444, #dc2626);
}

.category-icon.loans {
    background: linear-gradient(135deg, #8b5cf6, #7c3aed);
}

.category-icon.interest {
    background: linear-gradient(135deg, #f59e0b, #d97706);
}

.category-icon.fees {
    background: linear-gradient(135deg, #6b7280, #4b5563);
}

.category-icon.transfers {
    background: linear-gradient(135deg, #0ea5e9, #0284c7);
}

.category-icon.payments {
    background: linear-gradient(135deg, #ec4899, #db2777);
}

.category-icon.cash {
    background: linear-gradient(135deg, #f43f5e, #e11d48);
}

.category-icon.investments {
    background: linear-gradient(135deg, #14b8a6, #0d9488);
}

.category-icon.refunds {
    background: linear-gradient(135deg, #8b5cf6, #7c3aed);
}

.category-icon.insurance {
    background: linear-gradient(135deg, #f59e0b, #d97706);
}

.category-icon.taxes {
    background: linear-gradient(135deg, #6b7280, #4b5563);
}

.category-name {
    font-weight: 600;
    color: var(--dark);
    font-size: 1rem;
}

.security-info {
    margin-top: 60px;
    padding-top: 30px;
    border-top: 1px solid var(--gray-light);
    text-align: center;
}

.security-card {
    display: inline-flex;
    align-items: center;
    background: var(--lighter);
    border-radius: var(--border-radius);
    padding: 25px 30px;
    border: 1px solid var(--gray-light);
    max-width: 100%;
}

.security-icon {
    font-size: 2.2rem;
    color: var(--primary);
    margin-right: 20px;
}

.security-text h4 {
    margin-bottom: 10px;
    color: var(--dark);
    font-weight: 600;
    font-size: 1.2rem;
}

.security-text p {
    color: var(--gray);
    font-size: 1rem;
    margin: 0;
    max-width: 400px;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .bank-statement-form {
        padding: 30px 20px;
    }
    
    .feature-title {
        font-size: 1.5rem;
    }
    
    .categories-grid {
        grid-template-columns: repeat(3, 1fr);
    }
    
    .security-card {
        flex-direction: column;
        text-align: center;
        padding: 20px;
    }
    
    .security-icon {
        margin-right: 0;
        margin-bottom: 15px;
    }
    
    .file-upload-wrapper {
        padding: 30px 15px;
    }
}

@media (max-width: 480px) {
    .bank-statement-form {
        padding: 25px 15px;
    }
    
    .features-grid {
        grid-template-columns: 1fr;
    }
    
    .categories-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .file-upload-text h3 {
        font-size: 1.2rem;
    }
    
    .security-card {
        padding: 20px 15px;
    }
}

.form-actions {
    text-align: center;
    margin-top: 30px;
}

.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 14px 32px;
    background: var(--dark);
    color: var(--white);
    border-radius: var(--border-radius);
    font-weight: 600;
    transition: all 0.3s ease;
    border: none;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    box-shadow: var(--shadow-md);
    font-size: 1rem;
    min-width: 220px;
}

.btn-secondary {
    background: var(--gray-light);
    color: var(--dark);
}

.btn-secondary:hover {
    background: var(--gray);
}

.btn:hover {
    background: var(--primary-dark);
}

.btn-icon {
    margin-right: 8px;
}

.btn:disabled {
    background: var(--gray-light);
    color: var(--gray);
    cursor: not-allowed;
}

.btn:disabled .btn-icon {
    color: var(--gray);
}

/* Modal Styles */
.modal {
    display: none;
    position: fixed;
    z-index: 1001;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.5);
}

.modal-content {
    background-color: var(--white);
    margin: 5% auto;
    padding: 20px;
    border-radius: var(--border-radius-lg);
    width: 90%;
    max-width: 400px;
    box-shadow: var(--shadow-xl);
    position: relative;
    border: 1px solid var(--gray-light);
}

.modal-content h3 {
    margin-top: 0;
    margin-bottom: 20px;
    color: var(--dark);
    text-align: center;
    font-size: 1.4rem;
}

.modal-content .form-group {
    margin-bottom: 15px;
}

.modal-content .form-group label {
    display: block;
    margin-bottom: 6px;
    font-weight: 500;
    color: var(--dark);
    font-size: 0.9rem;
}

.modal-content .form-input {
    width: 100%;
    padding: 12px;
    border: 2px solid var(--gray-light);
    border-radius: var(--border-radius);
    font-family: inherit;
    font-size: 0.9rem;
}

.modal-content .form-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
}

.modal-content .btn {
    width: 100%;
    margin-top: 10px;
    padding: 12px;
    font-size: 0.9rem;
}

/* Customer Number Container */
.customer-number-container {
    display: flex;
    gap: 10px;
}

.customer-number-container .form-input {
    flex: 1;
}

.btn-generate {
    background: var(--primary);
    color: var(--white);
    border: none;
    border-radius: var(--border-radius);
    padding: 0 12px;
    font-size: 0.8rem;
    font-weight: 500;
    cursor: pointer;
    white-space: nowrap;
}

.btn-generate:hover {
    background: var(--primary-dark);
}

/* Close Button */
.close {
    color: var(--gray);
    float: right;
    font-size: 24px;
    font-weight: bold;
    position: absolute;
    right: 15px;
    top: 10px;
}

.close:hover,
.close:focus {
    color: var(--primary);
    text-decoration: none;
    cursor: pointer;
}

/* Responsive adjustments for modal */
@media (max-width: 768px) {
    .modal-content {
        margin: 10% auto;
        padding: 15px;
        width: 95%;
        max-width: none;
    }
    
    .modal-content h3 {
        font-size: 1.2rem;
        margin-bottom: 15px;
    }
    
    .customer-number-container {
        flex-direction: column;
        gap: 5px;
    }
    
    .btn-generate {
        width: 100%;
        padding: 10px;
    }
}

@media (max-width: 480px) {
    .modal-content {
        margin: 15% auto;
        padding: 12px;
    }
    
    .modal-content h3 {
        font-size: 1.1rem;
    }
    
    .modal-content .form-input {
        padding: 10px;
        font-size: 0.85rem;
    }
}

/* History Button */
.btn-secondary {
    background: var(--gray-light);
    color: var(--dark);
    margin-left: 15px;
}

.btn-secondary:hover {
    background: var(--gray);
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const uploadForm = document.getElementById('uploadForm');
    const uploadBtn = document.getElementById('uploadBtn');
    const fileInput = document.getElementById('file');
    const browseButton = document.getElementById('browseButton');
    const fileUploadWrapper = document.getElementById('fileUploadWrapper');
    const fileName = document.getElementById('fileName');
    const progressBar = document.getElementById('progressBar');
    const progressBarFill = document.getElementById('progressBarFill');
    const successAlert = document.getElementById('successAlert');
    const errorAlert = document.getElementById('errorAlert');
    const infoAlert = document.getElementById('infoAlert');
    const successMessage = document.getElementById('successMessage');
    const errorMessage = document.getElementById('errorMessage');
    const infoMessage = document.getElementById('infoMessage');
    
    // Modal elements
    const userInfoModal = document.getElementById('userInfoModal');
    const userInfoForm = document.getElementById('userInfoForm');
    const closeBtn = document.querySelector('.close');
    const analysisDateInput = document.getElementById('analysisDate');
    const generateCustomerNumberBtn = document.getElementById('generateCustomerNumber');
    const customerNumberInput = document.getElementById('customerNumber');
    
    // Set current date and time
    const now = new Date();
    analysisDateInput.value = now.toLocaleString();
    
    // Generate customer number
    function generateCustomerNumber() {
        // Get current date components
        const year = now.getFullYear().toString().slice(-2); // Last 2 digits of year
        const month = String(now.getMonth() + 1).padStart(2, '0'); // Month (01-12)
        const day = String(now.getDate()).padStart(2, '0'); // Day (01-31)
        const hours = String(now.getHours()).padStart(2, '0'); // Hours (00-23)
        const minutes = String(now.getMinutes()).padStart(2, '0'); // Minutes (00-59)
        
        // Generate a random 2-digit number
        const randomNum = String(Math.floor(Math.random() * 100)).padStart(2, '0');
        
        // Format: YYMMDDHHMM + random 2 digits
        const customerNumber = `${year}${month}${day}${hours}${minutes}${randomNum}`;
        customerNumberInput.value = customerNumber;
    }
    
    // Auto-generate customer number on page load
    generateCustomerNumber();
    
    // Generate customer number button click event
    generateCustomerNumberBtn.addEventListener('click', generateCustomerNumber);
    
    // Browse button click event
    browseButton.addEventListener('click', function() {
        fileInput.click();
    });
    
    // File input change event
    fileInput.addEventListener('change', function() {
        if (this.files.length > 0) {
            fileName.textContent = this.files[0].name;
            fileName.style.display = 'block';
        } else {
            fileName.style.display = 'none';
        }
    });
    
    // Drag and drop events
    fileUploadWrapper.addEventListener('dragover', function(e) {
        e.preventDefault();
        this.classList.add('dragover');
    });
    
    fileUploadWrapper.addEventListener('dragleave', function() {
        this.classList.remove('dragover');
    });
    
    fileUploadWrapper.addEventListener('drop', function(e) {
        e.preventDefault();
        this.classList.remove('dragover');
        
        if (e.dataTransfer.files.length) {
            fileInput.files = e.dataTransfer.files;
            fileName.textContent = e.dataTransfer.files[0].name;
            fileName.style.display = 'block';
        }
    });
    
    // Form submission
    uploadForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        if (!fileInput.value) {
            showError('Please select a file to upload');
            return;
        }
        
        // Validate file type
        const allowedTypes = ['pdf', 'png', 'jpg', 'jpeg', 'gif', 'doc', 'docx', 'xls', 'xlsx'];
        const fileExtension = fileInput.files[0].name.split('.').pop().toLowerCase();
        
        if (!allowedTypes.includes(fileExtension)) {
            showError('Invalid file type. Please upload a supported file format.');
            return;
        }
        
        // Show user info modal
        userInfoModal.style.display = 'block';
        
        // Regenerate customer number each time modal is shown
        generateCustomerNumber();
    });
    
    // Close modal when clicking on X
    closeBtn.onclick = function() {
        userInfoModal.style.display = 'none';
    }
    
    // Close modal when clicking outside of it
    window.onclick = function(event) {
        if (event.target == userInfoModal) {
            userInfoModal.style.display = 'none';
        }
    }
    
    // Handle user info form submission
    userInfoForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Get user info values
        const name = document.getElementById('userName').value;
        const bankName = document.getElementById('bankName').value;
        const customerNumber = document.getElementById('customerNumber').value;
        
        // Set hidden form values
        document.getElementById('hiddenName').value = name;
        document.getElementById('hiddenBankName').value = bankName;
        document.getElementById('hiddenCustomerNumber').value = customerNumber;
        
        // Close modal
        userInfoModal.style.display = 'none';
        
        // Show processing state
        showInfo('Processing your bank statement. This may take a few moments...');
        uploadBtn.innerHTML = '<i class="fas fa-spinner fa-spin btn-icon"></i> Processing...';
        uploadBtn.disabled = true;
        progressBar.style.display = 'block';
        
        // Simulate progress
        let progress = 0;
        const progressInterval = setInterval(() => {
            progress += 5;
            progressBarFill.style.width = `${progress}%`;
            if (progress >= 90) {
                clearInterval(progressInterval);
            }
        }, 100);
        
        // Submit form via AJAX to show progress
        const formData = new FormData(uploadForm);
        
        fetch('/upload', {
            method: 'POST',
            body: formData
        })
        .then(response => {
            clearInterval(progressInterval);
            progressBarFill.style.width = '100%';
            
            if (response.ok) {
                // Create a blob from the response
                return response.blob();
            } else {
                throw new Error('Server error occurred');
            }
        })
        .then(blob => {
            // Create download link
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'bank_statement_report.xlsx';
            document.body.appendChild(a);
            a.click();
            a.remove();
            window.URL.revokeObjectURL(url);
            
            showSuccess('Analysis complete! Your Excel report is downloading now.');
            uploadBtn.innerHTML = '<i class="fas fa-cogs btn-icon"></i> Analyze Statement';
            uploadBtn.disabled = false;
            progressBar.style.display = 'none';
            progressBarFill.style.width = '0%';
            
            // Reset form
            uploadForm.reset();
            fileName.style.display = 'none';
        })
        .catch(error => {
            clearInterval(progressInterval);
            console.error('Error:', error);
            showError('An error occurred while processing your file. Please try again.');
            uploadBtn.innerHTML = '<i class="fas fa-cogs btn-icon"></i> Analyze Statement';
            uploadBtn.disabled = false;
            progressBar.style.display = 'none';
            progressBarFill.style.width = '0%';
        });
    });
    
    // Alert functions
    function showSuccess(message) {
        successMessage.textContent = message;
        successAlert.style.display = 'flex';
        errorAlert.style.display = 'none';
        infoAlert.style.display = 'none';
        
        // Auto-hide after 5 seconds
        setTimeout(() => {
            successAlert.style.display = 'none';
        }, 5000);
    }
    
    function showError(message) {
        errorMessage.textContent = message;
        errorAlert.style.display = 'flex';
        successAlert.style.display = 'none';
        infoAlert.style.display = 'none';
        
        // Auto-hide after 5 seconds
        setTimeout(() => {
            errorAlert.style.display = 'none';
        }, 5000);
    }
    
    function showInfo(message) {
        infoMessage.textContent = message;
        infoAlert.style.display = 'flex';
        successAlert.style.display = 'none';
        errorAlert.style.display = 'none';
    }
    
    // Add fade-in animation to elements
    const fadeElements = document.querySelectorAll('.fade-in');
    fadeElements.forEach((element, index) => {
        element.style.opacity = '0';
        element.style.transform = 'translateY(20px)';
        element.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
        
        setTimeout(() => {
            element.style.opacity = '1';
            element.style.transform = 'translateY(0)';
        }, 200 * index);
    });
});
</script>
{% endblock %}